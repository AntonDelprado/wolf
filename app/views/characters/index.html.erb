<% provide(:title, "Characters") %>

<% if signed_in? %>
	<h1 class="span10">Your Characters</h1>

	<div class="row">
		<% Character.all.each do |character| %>
			<% if character.user_id == current_user.id %>
				<div class="well span3 center">
					<h2><%= character.name %></h2>
					<h3>Race: <%= character.race %></h3>
					<h4>XP: <%= character.xp %></h4>
					<p/>
					<div class="center">
						<%= link_to "View", character, class: "btn btn-small btn-primary" %>
						<%= link_to "Delete", character, class: "btn btn-small btn-danger", confirm: "Are you sure you want to delete '#{character.name}'?", method: :delete %>
					</div>
				</div>
			<% end %>
		<% end %>
	</div>

	<div class="row span10 center" style="padding-bottom: 20px;">
		<%= link_to "Create Character", new_character_path, class: "btn btn-large btn-primary" %>
	</div>

<% end %>

<h1 class="span10">Public Characters</h1>

<div class="row">
	<% Character.all.sort_by{ |character| character.name }.each do |character| %>
		<% if character.visibility == 'public' and ((not signed_in?) or character.user_id != current_user.id) %>
			<div class="well span3 center">
				<h2><%= character.name %></h2>
				<h3>Player: <%= User.find(character.user_id).handle %></h3>
				<h3>Race: <%= character.race %></h3>
				<h4>XP: <%= character.xp %></h4>
				<p/>
				<div class="center">
					<%= link_to "View", character, class: "btn btn-small btn-primary" %>
				</div>
			</div>
		<% end %>
	<% end %>
</div>
